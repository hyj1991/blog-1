<%- include("header",assetManifest); %>
    <script type="text/x-mathjax-config">
    MathJax.HTML.Cookie.Set("menu",{renderer:'SVG'}); 
    MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    "HTML-CSS": {
      availableFonts:[],
      styles: {".MathJax_Preview": {visibility: "hidden"}}
    },
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
  });
    </script>
    <script type="text/javascript" async="" src="resources/js/MathJax/MathJax.js"></script>
    <body>
        <div class="container" id="backToTop">
            <div id='back'>TOP</div>
            <%- include("sidebar",{}) %>
                <div class="col-lg-8 col-xs-9" id='content'>
                    <script type="text/javascript">
                        var blogpost = <%- blogPost %>;
                    </script>
                    <% if(typeof(editorcontent)!='undefined'){ %>
                        <%- editorcontent %>
                            <% } %>
                                <div id='btn'><span><a id='page_up' href="">上一章</a></span><span><a id='page_down' href="">下一章</a></span></div>
                </div>
        </div>
        <script>
	    var urlQueryObj = commonlib.getUrlQueryObject(window.location.search); 
            $("#back").css({
                left: ($(window).width() * 0.9),
                top: ($(window).height() * 0.9),
                "z-index": 5
            })
            if (blogpost.pageInfo) {
                $("#page_up").text("上一篇");
                $("#page_down").text("下一篇");
                if (blogpost.pageInfo.prev) {
                    var tmpPrev = "/blogpost?op=show&postId=" + blogpost.pageInfo.prev._id;
                    $("#page_up").attr("title", blogpost.pageInfo.prev.title);
                    $("#page_up").click(function () {
                        $("#page_up").attr("href", tmpPrev);
                    });
                } else {
                    $("#page_up").attr("title", "没有了");
                }
                if (blogpost.pageInfo.next) {
                    var tmpNext = "/blogpost?op=show&postId=" + blogpost.pageInfo.next._id;
                    $("#page_down").attr("title", blogpost.pageInfo.next.title);
                    $("#page_down").click(function () {
                        $("#page_down").attr("href", tmpNext);
                    })
                } else {
                    $("#page_down").attr("title", "没有了");
                }
            }else{
		var pageOffset = urlQueryObj.begin && parseInt(urlQueryObj.begin)|| 0;
		var pageArticles = config.BLOG_POST_ARTICLES;
                $("#page_up").text("上一页");
		$("#page_up").attr("href","/blogpost?op=list&begin="+(pageOffset>0?pageOffset-pageArticles:0));
                $("#page_down").text("下一页");
		$("#page_down").attr("href","/blogpost?op=list&begin="+(pageOffset+pageArticles));
            }
            $("#back").click(function () {
                var time = setInterval(function () {
                    document.body.scrollTop = document.body.scrollTop - 50;
                    if (document.body.scrollTop === 0) {
                        clearInterval(time);
                    }
                }, 1);
            })
            $("#content").css({
                "min-height":($(window).height()-5)
            })
        </script>
    </body>

    </html>
